const equipo = [
    {
      nombre: "jorge miranda yáñez",
      cargo: "director ejecutivo",
      imagen: "./img/equipo/jmiranda.jpg",
      modalId: "staticBackdrop1",
      descripcion: "Matrón con Maestría en Administración de Negocios (MBA). Con más de 30 años de experiencia en la industria farmacéutica, con conocimientos en el área de la Oncología y Administración de Empresas."
    },
    {
      nombre: "Esther Rodriguez de Vásquez",
      cargo: "Director Médico y Oncólogo Médico",
      imagen: "./img/equipo/drarodriguez2.jpg",
      modalId: "staticBackdrop2",
      descripcion: '<p class="fs-6 px-3"> Médico Cirujano de la Universidad Central de Venezuela. Posteriormente obtiene el título de Medicina Interna en el Hospital Militar Carlos Arvelo y Oncología Médica en el Instituto Oncológico Luis Razetti de Venezuela. <br> Certificada en la Corporación Nacional Autónoma de Especialidades Médicas (CONACEM). <br> Médico Oncólogo del Hospital: Las Higueras, Clínica Sanatorio Alemán y Clínica Biobío, de la ciudad de Concepción. </p>'
    },
    {
      nombre: "Alvaro Compán Jiménez",
      cargo: "Subdirector Médico",
      imagen: "./img/equipo/drcompan.jpg",
      modalId: "staticBackdrop3",
      descripcion: "Médico Cirujano de la Universidad de Chile. Posteriormente obtiene el título de Cirujano General en el Hospital Clínico de la misma Universidad. Cursa la sub especialidad de Cabeza y Cuello, Base de Cráneo, Cirugía Reconstructiva y Micro Reconstructiva en el Instituto de Tumores de Milán, Italia. Docente de Pre y Post grado del Departamento de Cirugía de la Facultad de Medicina de la Universidad de Concepción. Actualmente se desempeña como Sub-Jefe del equipo de Cabeza y Cuello del Hospital Clínico Regional, Guillermo Grant Benavente."
    },
    {
      nombre: "M. José Sepúlveda Serrano",
      cargo: "Supervisora ensayos clínicos y regulatorio",
      imagen: "./img/equipo/mariajose.jpg",
      modalId: "staticBackdrop4",
      descripcion: 'Especialista en Cuidados Intensivos del Adulto Universidad de Concepción Diplomada en Gestión y Dirección en Servicios de Enfermería Pontificia Universidad Católica de Chile. <ul> <li>Diplomada en Cuidados Cardiovasculares del Adulto Pontificia Universidad Católica de Chile.</li> <li>15 años de experiencia clínica en Hospitales Públicos de la región en áreas de Urgencias, Pabellón y Cuidados Intensivos del Adulto.</li> <li>11 años de experiencia como Coordinadora de Estudios Clínicos en áreas como: Oncología, Hematología,Cardiología, Nefrología, Broncopulmonar, Gastroenterología y Neurología.</li> </ul>'
    },
    {
      nombre: "Carolina Belmar Caamaño",
      cargo: "Coordinadora estudios clínicos",
      imagen: "./img/equipo/cbelmar.jpg",
      modalId: "staticBackdrop5",
      descripcion: "Encargada de brindar atención clínica a los pacientes y velar por el cumplimiento de protocolos e indicadores en salud. <br> <ul> <li>Epidemióloga formada en la Universidad de los Andes, Santiago</li> <li>Diploma en Gestión de Calidad y Seguridad Asistencial Universidad de Chile con experiencia en seguridad clínica, calidad y acreditación.</li> <li>Diplomado en Cuidados de Enfermería del paciente Oncológico Universidad San Sebastián. Con experiencia en la atención de pacientes oncológicos.</li> <li>Diploma en Investigación Clínica y Certificado de Monitor de Ensayos Clínicos, Universidad de Chile.</li> </ul>"
    },
    {
      nombre: "Evelyne Fuenzalida Araneda",
      cargo: "Asistente de coordinación y administración",
      imagen: "./img/equipo/efuenzalida.jpg",
      modalId: "staticBackdrop6",
      descripcion: "Técnico Superior de Enfermería, experiencia en Servicio de Unidad de Paciente Crítico, procedimiento cardiológico y pabellón ambulatorio Dental- Médico. <br> 6 años en Servicio de Oncología, Medicina, Cirugía y Unidad de Paciente Critico en la Clínica Sanatorio Alemán. 5 años en Centro Médico RED SALUD en unidad pabellón ambulatorio dental y médico, en la unidad de procedimientos médicos y cardiológicos y vacunatorio."
    },
    {
      nombre: "Francisca Urrutia Jarpa",
      cargo: "Coordinadora estudios clínicos",
      imagen: "./img/equipo/furrutia.jpg",
      modalId: "staticBackdrop7",
      descripcion: "Enfermera titulada de la Universidad del Desarrollo en Concepción, Especialista en Cuidados Intensivos del Adulto, Universidad de Concepción. Encargada de velar por el cumplimiento de protocolos e indicadores en salud, amplia experiencia clínica en Hospitales Públicos de la región en áreas de Urgencias, Pabellón y Cuidados Intensivos del Adulto."
    },
    {
      nombre: "Geraldo Pereira Roca",
      cargo: "Oncólogo Médico",
      imagen: "./img/equipo/gpereira.jpg",
      modalId: "staticBackdrop8",
      descripcion: 'Médico Cirujano egresado de la Universidad de Carabobo 2009. Valencia - Venezuela. <br> Egresado en 2015, de la Especialidad de Oncología Médica realizada en el Instituto de Oncología "Dr. Luis Razetti" a cargo de la Universidad Central de Venezuela. Caracas - Venezuela. Eunacom 2021. <br> 10 años de experiencia, tanto nacional como internacional, en el área de tratamiento de pacientes oncológicos. Amplia experiencia en el área de investigación clínica.'
    },
    {
      nombre: "Mauricio Chandia Cabas",
      cargo: "Medicina Interna y Hematología",
      imagen: "./img/equipo/drchandia.jpg",
      modalId: "staticBackdrop10",
      descripcion: "Médico Cirujano titulado de la Universidad de la Frontera en Temuco, Chile. Cursa la especialidad de Medicina Interna en la Universidad Austral de Chile, en Valdivia. Luego hace su espacialidad de Hematología en la Pontificia Universidad Católica de Chile en Santiago. Posteriormente cursa un Master en Biología clínica del cáncer, Citometría de flujo, en la Universidad de Salamanca en Salamanca, España. Desde el año 2013 a la fecha se desempeña como Hematólogo Clínico en el Hospital Regional de Concepción, donde además es encargado del Laboratorio de Citometría de flujo."
    },
    {
      nombre: "FERNANDA HIDALGO CABEZAS",
      cargo: "Medicina general y Subinvestigadora",
      imagen: "./img/equipo/fernanda.jpg",
      modalId: "staticBackdrop11",
      descripcion: 'Médico Cirujano de la Universidad San Sebastián, postítulos de Infecciones Asociadas a Atención en Salud y de ACLS en la misma casa de estudios, luego se perfecciona en el Desarrollo de Habilidades y Competencias de Coaching en la Adademy Global Coaching. <br> Actualmente es Médico residente del servicio de Hematología y Oncología del Hospital Guillermo Grant Benavente, Médico General del Centro Kinesiosport,  Encargada de gestión de la ONG Contracooltura y ejerce docencia en el Hospital simulado de la UNAB'
    },
    {
      nombre: "ARANZA MUÑOZ RAMIREZ",
      cargo: "Enfermera clínica",
      imagen: "./img/equipo/aranza.jpg",
      modalId: "staticBackdrop12",
      descripcion: 'Enfermera titulada de la Universidad del Desarrollo en Concepción, desarrolla postítulos de Administración y Dirección Estratégica para Instituciones de la Salud y Gestión del Cuidado en Paciente Pediátrico. Amplia experiencia clínica en Hospitales Públicos de la región en áreas Quirúrgicas y Pediátricas.'
    },
    {
      nombre: "DIEGO RICÚ PAZ",
      cargo: " Coordinador estudios clínicos",
      imagen: "./img/equipo/diego.jpg",
      modalId: "staticBackdrop13",
      descripcion: 'Enfermero de la Universidad San Sebastián de Concepción, Diplomado en cuidados de enfermería en paciente crítico adulto en la Universidad Católica de Chile. Experiencia en Hospitales públicos de la región en áreas de UCI Cardioquirurgica.'
    },
    {
      nombre: "JOSE MAURICIO BARBOSA HERNÁNDEZ",
      cargo: "Médico Cirujano",
      imagen: "./img/equipo/jbarbosa.jpg",
      modalId: "staticBackdrop14",
      descripcion: 'Médico y Cirujano formado en Universidad Libre de Colombia seccional Barranquilla. <br> Médico Internista de la Universidad de Concepción de Chile y Sub-especialista en Oncología Médica, formado en el Instituto Nacional del Cáncer y Clínica Alemana de Santiago en convenio con la Universidad del Desarrollo de Chile.'
    }
  ];

  
  function createTeamHTML(equipo, integrantesPorGrupo) {
    let equipoCompleto = [...equipo];
    let html = '';
    
    let winWidth = window.innerWidth;
    let cardWidthAdjust = ""

    if (winWidth < 790) {
        cardWidthAdjust = 'style="max-width: 60%; margin:20px; flex: 1;"'
    } else {
        cardWidthAdjust = 'style="max-width: 90%; flex: 1;"'
    }

    // Si la cantidad de integrantes no es múltiplo del número de integrantes por grupo, repetimos los últimos integrantes
    let increment_team = integrantesPorGrupo - 1;
    while (equipoCompleto.length % integrantesPorGrupo !== 0) {
      equipoCompleto.splice(equipo.length - 1, 0, equipo[equipo.length - increment_team]);
      increment_team += 1;
    }
  
    for (let i = 0; i < equipoCompleto.length; i += integrantesPorGrupo) {
      html += `<div class="carousel-item ${i === 0 ? 'active' : ''}">
        <div class="row justify-content-center align-items-stretch">`;
  
      for (let j = 0; j < integrantesPorGrupo; j++) {
        const miembro = equipoCompleto[i + j];
        const colSizeClass = calculateColumnSizeClass(integrantesPorGrupo, j);
        
        html += `<div class="${colSizeClass}">
            <div class="team_card mx-auto" ${cardWidthAdjust}>
              <img class="img-fluid" src="${miembro.imagen}" alt="${miembro.nombre}">
              <div class="description">
                <p class="cargo">${miembro.cargo}</p>
                <p class="nombre">${miembro.nombre}</p>
                <button type="button" class="btn" data-bs-toggle="modal" data-bs-target="#${miembro.modalId}">Saber más</button>
              </div>
            </div>
          </div>
          
          <!-- ${miembro.nombre} -->
          <div class="modal fade" id="${miembro.modalId}" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="staticBackdropLabel" aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered">
              <div class="modal-content">
                <div class="modal-header">
                  <h1 class="modal-title fs-5" id="staticBackdropLabel">
                    Nuestro equipo
                  </h1>
                  <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                  <img class="img-fluid rounded-3" src="${miembro.imagen}" alt="" />
                  <p class="text-capitalize fs-4 px-3 mt-3">${miembro.cargo}</p>
                  <p class="text-capitalize fs-5 px-3">${miembro.nombre}</p>
                  <p class="fs-6 px-3">
                  ${miembro.descripcion}
                  </p>
                </div>
              </div>
            </div>
          </div>
          
          `;
      }
  
      html += `</div>
      </div>`;
    }
  
    console.log("HTML generated: ", html);
    const carouselInner = document.querySelector('.carousel-inner-team');
    if (carouselInner) {
      carouselInner.innerHTML = html;
      console.log("HTML injected successfully");
    } else {
      console.log("carousel-inner element not found");
    }
  }
  
  // Esta función calcula la clase de tamaño de columna Bootstrap según el número de integrantes por grupo y la posición actual.
  function calculateColumnSizeClass(integrantesPorGrupo, currentPosition) {
    switch (integrantesPorGrupo) {
      case 2:
        return currentPosition === 0 ? "col-12 col-md-6" : "col-12 col-md-6";
      case 3:
        return currentPosition === 0 ? "col-12 col-md-4" : currentPosition === 1 ? "col-12 col-md-4" : "col-12 col-md-4";
      default:
        return "col-12";
    }
  }
  
  // Ejecuta la función para generar el HTML del equipo
  document.addEventListener("DOMContentLoaded", () => {
    console.log("DOM fully loaded and parsed");
    // Determinar el número de integrantes por grupo según el tamaño de la pantalla
    let integrantesPorGrupo;
    if (window.innerWidth < 992) {
      integrantesPorGrupo = 2;
    } else {
      integrantesPorGrupo = 3;
    }
    createTeamHTML(equipo, integrantesPorGrupo);
  });
  
  // Escucha el evento de cambio de tamaño de la ventana para ajustar dinámicamente el número de integrantes por grupo.
  window.addEventListener('resize', () => {
    let integrantesPorGrupo;
    if (window.innerWidth < 992) {
      integrantesPorGrupo = 2;
    } else {
      integrantesPorGrupo = 3;
    }
    createTeamHTML(equipo, integrantesPorGrupo);
  });
  